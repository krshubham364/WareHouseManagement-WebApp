<div class="flex justify-center ml-30 mt-2">
  <form [formGroup]="orderForm" style="width: 900px" class="shadow border bg-white pt-2 p-8">
    <!-- Dynamic Heading -->
    @if (order) {
      <h1 class="text-2xl font-semibold pb-4">Update Order</h1>
    } @else {
      <h1 class="text-2xl font-semibold pb-4">Add Order</h1>
    }

    <div class="flex flex-wrap">
      <div class="w-full">
        <mat-label>Order Number</mat-label>
        <mat-form-field class="w-full" appearance="outline">
          <input matInput type="text" formControlName="orderNo" />
        </mat-form-field>
      </div>

      <div class="w-full">
        <mat-label>Product</mat-label>
        <mat-form-field class="w-full" appearance="outline">
          <mat-select formControlName="productId" (selectionChange)="productSelected($event.value)">
            @for (item of products; track item.id) {
              <mat-option [value]="item.id">
                {{ item.name }} (Available: {{ item.availableQuantity }})
              </mat-option>
            }
          </mat-select>
        </mat-form-field>
      </div>
    </div>

    <!-- Quantity, Sale Price, and Discount in one row -->
    <div class="flex gap-4 mt-4">
      <div class="w-1/3">
        <mat-label>Quantity</mat-label>
        <mat-form-field class="w-full" appearance="outline">
          <input matInput type="number" formControlName="quantity" />
        </mat-form-field>
      </div>

      <div class="w-1/3">
        <mat-label>Sale Price</mat-label>
        <mat-form-field class="w-full" appearance="outline">
          <input matInput type="number" formControlName="salePrice" />
        </mat-form-field>
      </div>

      <div class="w-1/3">
        <mat-label>Discount</mat-label>
        <mat-form-field class="w-full" appearance="outline">
          <input matInput type="number" formControlName="discount" />
        </mat-form-field>
      </div>
    </div>

    <div class="w-full mt-4">
      <mat-label>Total Amount</mat-label>
      <mat-form-field class="w-full" appearance="outline">
        <input matInput type="number" formControlName="totalAmount" />
      </mat-form-field>
    </div>

    <!-- Dynamic Button -->
    <div class="w-full flex justify-center mt-4">
      @if (order) {
        <button mat-raised-button color="primary" type="submit" (click)="updateOrder()">Update Order</button>
      } @else {
        <button mat-raised-button color="primary" type="submit" (click)="addOrder()">Add Order</button>
      }
    </div>
  </form>
</div>